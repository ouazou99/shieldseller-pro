# üöÄ ShieldSeller - Complete Deployment Guide

This guide will walk you through deploying ShieldSeller to production.

---

## ‚úÖ PRE-DEPLOYMENT CHECKLIST

Before deploying, make sure you have:

- [ ] GitHub account
- [ ] Vercel account (free)
- [ ] Neon/Supabase database (free tier)
- [ ] Stripe account (test mode is fine)
- [ ] Domain name (optional)

---

## üì¶ STEP 1: Setup Database

### **Option A: Neon (Recommended)**

1. Go to https://neon.tech
2. Sign up (use GitHub for fastest setup)
3. Create new project: "shieldseller-prod"
4. Copy connection string:
   ```
   postgresql://neondb_owner:xxx@ep-xxx.us-east-1.aws.neon.tech/neondb?sslmode=require
   ```

### **Option B: Supabase**

1. Go to https://supabase.com
2. Create new project
3. Go to Settings ‚Üí Database
4. Copy connection string (URI format)

---

## üîê STEP 2: Setup Stripe

1. Go to https://stripe.com
2. Create account (or login)
3. Get API keys:
   - Dashboard ‚Üí Developers ‚Üí API keys
   - Copy "Secret key" (sk_test_...)
   - Copy "Publishable key" (pk_test_...)

4. Create products:
   - Dashboard ‚Üí Products ‚Üí Add Product
   - **Starter**: $19/month recurring
   - **Pro**: $49/month recurring
   - **Agency**: $149/month recurring
   - Copy each Price ID (price_xxx)

5. Setup webhook:
   - Dashboard ‚Üí Developers ‚Üí Webhooks
   - Add endpoint: `https://your-domain.vercel.app/api/stripe/webhook`
   - Select events: `checkout.session.completed`, `customer.subscription.*`, `invoice.*`
   - Copy webhook secret (whsec_...)

---

## üìß STEP 3: Setup Email (Optional)

### **Using Resend (Recommended)**

1. Go to https://resend.com
2. Sign up
3. Add domain or use testing domain
4. Get API key from dashboard
5. Copy API key (re_...)

---

## ü§ñ STEP 4: Setup AI (Optional)

1. Go to https://console.anthropic.com
2. Get API key
3. Copy key (sk-ant-...)

---

## üöÄ STEP 5: Deploy to Vercel

### **A. Push to GitHub**

```bash
cd shieldseller
git init
git add .
git commit -m "Initial commit"
git branch -M main
git remote add origin https://github.com/your-username/shieldseller.git
git push -u origin main
```

### **B. Deploy on Vercel**

1. Go to https://vercel.com
2. Click "Add New Project"
3. Import your GitHub repository
4. Configure:
   - **Framework Preset**: Next.js
   - **Build Command**: `npm run build`
   - **Output Directory**: `.next`

5. Add Environment Variables:

```env
# Database
DATABASE_URL="your_neon_or_supabase_url"

# NextAuth
NEXTAUTH_SECRET="generate_with: openssl rand -base64 32"
NEXTAUTH_URL="https://your-app.vercel.app"

# Stripe
STRIPE_SECRET_KEY="sk_test_..."
STRIPE_PUBLISHABLE_KEY="pk_test_..."
STRIPE_WEBHOOK_SECRET="whsec_..."
STRIPE_STARTER_PRICE_ID="price_..."
STRIPE_PRO_PRICE_ID="price_..."
STRIPE_AGENCY_PRICE_ID="price_..."

# Email (Optional)
RESEND_API_KEY="re_..."
EMAIL_FROM="alerts@your-domain.com"

# AI (Optional)
ANTHROPIC_API_KEY="sk-ant-..."

# CRON (Auto-generated by Vercel)
CRON_SECRET="your_cron_secret"

# App URL
NEXT_PUBLIC_APP_URL="https://your-app.vercel.app"
```

6. Click "Deploy"
7. Wait 2-3 minutes for deployment

---

## üóÑÔ∏è STEP 6: Initialize Database

After deployment, run migrations:

```bash
# Install Vercel CLI
npm i -g vercel

# Login
vercel login

# Link project
vercel link

# Run migrations
vercel env pull .env.local
npx prisma migrate deploy
```

Or use the Vercel dashboard:
1. Go to your project ‚Üí Settings ‚Üí Functions
2. Add a one-time function to run `npx prisma migrate deploy`

---

## üåê STEP 7: Custom Domain (Optional)

1. Vercel Dashboard ‚Üí Your Project ‚Üí Settings ‚Üí Domains
2. Add your domain: `shieldseller.com`
3. Follow DNS setup instructions
4. Update `NEXTAUTH_URL` and `NEXT_PUBLIC_APP_URL` in environment variables

---

## ‚úÖ STEP 8: Test Production

### **Test Authentication:**
1. Go to https://your-app.vercel.app/register
2. Create account
3. Login

### **Test Database:**
1. Add a shop
2. Upload CSV
3. Check if listings appear

### **Test Stripe:**
1. Go to /pricing
2. Click "Start Free Trial"
3. Use test card: `4242 4242 4242 4242`
4. Check Stripe dashboard for subscription

### **Test Webhooks:**
1. Stripe Dashboard ‚Üí Webhooks
2. Check if events are being received
3. Check Vercel logs for webhook processing

---

## üîß TROUBLESHOOTING

### **Issue: Database connection failed**
- Check DATABASE_URL is correct
- Make sure SSL is enabled (`?sslmode=require`)
- Verify database is accessible from Vercel

### **Issue: Stripe webhook not working**
- Verify webhook URL is correct
- Check webhook secret matches
- Look at Vercel logs for errors

### **Issue: Emails not sending**
- Check RESEND_API_KEY is set
- Verify domain is verified in Resend
- Check Vercel logs

### **Issue: 404 on pages**
- Clear Vercel cache
- Redeploy
- Check vercel.json configuration

---

## üìä MONITORING

### **Vercel Analytics**
- Dashboard ‚Üí Your Project ‚Üí Analytics
- Monitor traffic, performance, errors

### **Database Monitoring**
- Neon/Supabase dashboard
- Check connection count, storage

### **Stripe Monitoring**
- Dashboard ‚Üí Developers ‚Üí Events
- Monitor subscriptions, payments

---

## üîí SECURITY CHECKLIST

- [ ] All environment variables set
- [ ] NEXTAUTH_SECRET is random and secure
- [ ] Stripe webhook secret configured
- [ ] Database has SSL enabled
- [ ] CRON_SECRET is set
- [ ] Rate limiting enabled (Vercel does this automatically)

---

## üéâ YOU'RE LIVE!

Your SaaS is now deployed and ready for customers!

**Next steps:**
1. Test all features thoroughly
2. Invite beta users
3. Collect feedback
4. Iterate and improve
5. Market and grow!

---

## üìû NEED HELP?

- Vercel Docs: https://vercel.com/docs
- Stripe Docs: https://stripe.com/docs
- Prisma Docs: https://prisma.io/docs
- Next.js Docs: https://nextjs.org/docs
